# 认证模块 API 接口文档

> 基于KNN算法的购书推荐系统 - 认证模块接口文档
> 
> 基础路径: `http://localhost:8080`
> 
> 文档更新时间: 2026-02-10

---

## 目录

1. [用户登录](#1-用户登录)
2. [用户注册](#2-用户注册)
3. [退出登录](#3-退出登录)
4. [检查用户名是否可用](#4-检查用户名是否可用)
5. [获取当前用户信息](#5-获取当前用户信息)
6. [更新用户信息](#6-更新用户信息)
7. [修改密码](#7-修改密码)
8. [更新头像](#8-更新头像)
9. [管理员-获取用户列表](#9-管理员-获取用户列表)
10. [管理员-获取用户详情](#10-管理员-获取用户详情)
11. [管理员-更新用户状态](#11-管理员-更新用户状态)
12. [管理员-重置用户密码](#12-管理员-重置用户密码)
13. [管理员-删除用户](#13-管理员-删除用户)
14. [图书-获取图书列表](#14-图书-获取图书列表)
15. [图书-获取图书详情](#15-图书-获取图书详情)
16. [图书-搜索图书](#16-图书-搜索图书)
17. [图书-获取热门图书](#17-图书-获取热门图书)
18. [图书-获取新书推荐](#18-图书-获取新书推荐)
19. [分类-获取分类列表](#19-分类-获取分类列表)
20. [分类-获取分类树](#20-分类-获取分类树)
21. [管理员-图书列表](#21-管理员-图书列表)
22. [管理员-图书详情](#22-管理员-图书详情)
23. [管理员-添加图书](#23-管理员-添加图书)
24. [管理员-更新图书](#24-管理员-更新图书)
25. [管理员-删除图书](#25-管理员-删除图书)
26. [管理员-更新图书状态](#26-管理员-更新图书状态)
27. [管理员-分类列表](#27-管理员-分类列表)
28. [管理员-分类树](#28-管理员-分类树)
29. [管理员-添加分类](#29-管理员-添加分类)
30. [管理员-更新分类](#30-管理员-更新分类)
31. [管理员-删除分类](#31-管理员-删除分类)
32. [订单-创建订单](#32-订单-创建订单)
33. [订单-获取订单列表](#33-订单-获取订单列表)
34. [订单-获取订单详情](#34-订单-获取订单详情)
35. [订单-取消订单](#35-订单-取消订单)
36. [订单-支付订单](#36-订单-支付订单)
37. [订单-确认收货](#37-订单-确认收货)
38. [管理员-订单列表](#38-管理员-订单列表)
39. [管理员-订单详情](#39-管理员-订单详情)
40. [管理员-订单发货](#40-管理员-订单发货)
41. [管理员-更新订单状态](#41-管理员-更新订单状态)
42. [管理员-删除订单](#42-管理员-删除订单)
43. [购物车-获取列表](#43-购物车-获取列表)
44. [购物车-添加商品](#44-购物车-添加商品)
45. [购物车-更新数量](#45-购物车-更新数量)
46. [购物车-删除商品](#46-购物车-删除商品)
47. [购物车-清空购物车](#47-购物车-清空购物车)
48. [购物车-获取数量](#48-购物车-获取数量)
49. [地址-获取列表](#49-地址-获取列表)
50. [地址-添加地址](#50-地址-添加地址)
51. [地址-更新地址](#51-地址-更新地址)
52. [地址-删除地址](#52-地址-删除地址)
53. [地址-设置默认](#53-地址-设置默认)
54. [评价-添加评价](#54-评价-添加评价)
55. [评价-图书评价列表](#55-评价-图书评价列表)
56. [评价-我的评价列表](#56-评价-我的评价列表)
57. [评价-删除评价](#57-评价-删除评价)
58. [收藏-添加收藏](#58-收藏-添加收藏)
59. [收藏-取消收藏](#59-收藏-取消收藏)
60. [收藏-收藏列表](#60-收藏-收藏列表)
61. [收藏-检查是否收藏](#61-收藏-检查是否收藏)
62. [浏览记录-获取列表](#62-浏览记录-获取列表)
63. [浏览记录-清空记录](#63-浏览记录-清空记录)
64. [浏览记录-删除记录](#64-浏览记录-删除记录)
65. [推荐-个性化推荐](#65-推荐-个性化推荐)
66. [推荐-热门推荐](#66-推荐-热门推荐)
67. [推荐-相似图书推荐](#67-推荐-相似图书推荐)
68. [推荐-猜你喜欢](#68-推荐-猜你喜欢)
69. [推荐-新书推荐](#69-推荐-新书推荐)
70. [统计-总览](#70-统计-总览)
71. [统计-销售趋势](#71-统计-销售趋势)
72. [统计-销量排行](#72-统计-销量排行)
73. [统计-分类销量](#73-统计-分类销量)
74. [统计-用户增长](#74-统计-用户增长)
75. [文件-上传图片](#75-文件-上传图片)
76. [文件-上传封面](#76-文件-上传封面)
77. [文件-上传头像](#77-文件-上传头像)
78. [推荐配置-获取配置](#78-推荐配置-获取配置)
79. [推荐配置-更新配置](#79-推荐配置-更新配置)

---

## 通用说明

### 请求头

需要认证的接口请在请求头中添加：

```
Authorization: Bearer <token>
```

### 响应格式

所有接口统一返回格式：

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {}
}
```

### 状态码说明

| 状态码 | 说明 |
|--------|------|
| 200 | 成功 |
| 400 | 请求参数错误 |
| 401 | 未登录或登录过期 |
| 403 | 无权限 |
| 500 | 服务器错误 |

---

## 1. 用户登录

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 用户/管理员登录系统 |
| **路径** | `/api/auth/login` |
| **方法** | `POST` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| username | String | 是 | 用户名 |
| password | String | 是 | 密码 |

### 请求示例

```bash
curl -X POST "http://localhost:8080/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "testuser",
    "password": "123456"
  }'
```

### 响应示例

**成功响应：**

```json
{
    "code": 200,
    "message": "登录成功",
    "data": {
        "userId": 1,
        "username": "testuser",
        "nickname": "测试用户",
        "avatar": "http://xxx.com/avatar.jpg",
        "role": 0,
        "token": "eyJhbGciOiJIUzUxMiJ9.eyJ1c2VySWQiOjEsInVzZXJuYW1lIjoidGVzdHVzZXIiLCJyb2xlIjowLCJpYXQiOjE3MDM..."
    }
}
```

**失败响应：**

```json
{
    "code": 500,
    "message": "用户名或密码错误",
    "data": null
}
```

---

## 2. 用户注册

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 新用户注册账号 |
| **路径** | `/api/auth/register` |
| **方法** | `POST` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| username | String | 是 | 用户名（4-20字符） |
| password | String | 是 | 密码（6-20字符） |
| confirmPassword | String | 是 | 确认密码 |
| nickname | String | 否 | 昵称 |
| email | String | 否 | 邮箱 |

### 请求示例

```bash
curl -X POST "http://localhost:8080/api/auth/register" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "newuser",
    "password": "123456",
    "confirmPassword": "123456",
    "nickname": "新用户",
    "email": "newuser@example.com"
  }'
```

### 响应示例

**成功响应：**

```json
{
    "code": 200,
    "message": "注册成功",
    "data": null
}
```

**失败响应：**

```json
{
    "code": 500,
    "message": "用户名已存在",
    "data": null
}
```

---

## 3. 退出登录

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 用户退出登录 |
| **路径** | `/api/auth/logout` |
| **方法** | `POST` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X POST "http://localhost:8080/api/auth/logout" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "退出成功",
    "data": null
}
```

---

## 4. 检查用户名是否可用

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 检查用户名是否已被注册 |
| **路径** | `/api/auth/check-username` |
| **方法** | `GET` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| username | String | 是 | 要检查的用户名 |

### 请求示例

```bash
curl -X GET "http://localhost:8080/api/auth/check-username?username=testuser"
```

### 响应示例

**用户名可用：**

```json
{
    "code": 200,
    "message": "操作成功",
    "data": true
}
```

**用户名已存在：**

```json
{
    "code": 200,
    "message": "操作成功",
    "data": false
}
```

---

## 5. 获取当前用户信息

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取当前登录用户的详细信息 |
| **路径** | `/api/user/info` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X GET "http://localhost:8080/api/user/info" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "id": 1,
        "username": "testuser",
        "nickname": "测试用户",
        "email": "test@example.com",
        "phone": "13800138000",
        "avatar": "http://xxx.com/avatar.jpg",
        "role": 0,
        "status": 1,
        "createTime": "2024-01-01 10:00:00"
    }
}
```

---

## 6. 更新用户信息

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新当前用户的基本信息 |
| **路径** | `/api/user/update` |
| **方法** | `PUT` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| nickname | String | 否 | 昵称 |
| email | String | 否 | 邮箱 |
| phone | String | 否 | 手机号 |
| avatar | String | 否 | 头像URL |

### 请求示例

```bash
curl -X PUT "http://localhost:8080/api/user/update" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "nickname": "新昵称",
    "email": "newemail@example.com",
    "phone": "13900139000"
  }'
```

### 响应示例

```json
{
    "code": 200,
    "message": "更新成功",
    "data": null
}
```

---

## 7. 修改密码

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 修改当前用户密码 |
| **路径** | `/api/user/password` |
| **方法** | `PUT` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| oldPassword | String | 是 | 原密码 |
| newPassword | String | 是 | 新密码（6-20字符） |
| confirmPassword | String | 是 | 确认新密码 |

### 请求示例

```bash
curl -X PUT "http://localhost:8080/api/user/password" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "oldPassword": "123456",
    "newPassword": "654321",
    "confirmPassword": "654321"
  }'
```

### 响应示例

**成功响应：**

```json
{
    "code": 200,
    "message": "密码修改成功，请重新登录",
    "data": null
}
```

**失败响应：**

```json
{
    "code": 500,
    "message": "原密码错误",
    "data": null
}
```

---

## 8. 更新头像

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新用户头像URL |
| **路径** | `/api/user/avatar` |
| **方法** | `PUT` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| avatar | String | 是 | 头像URL（Query参数） |

### 请求示例

```bash
curl -X PUT "http://localhost:8080/api/user/avatar?avatar=http://xxx.com/new-avatar.jpg" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "头像更新成功",
    "data": null
}
```

---

## 9. 管理员-获取用户列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员分页查询用户列表 |
| **路径** | `/api/admin/user/list` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |
| keyword | String | 否 | - | 搜索关键词（用户名/昵称/邮箱） |

### 请求示例

```bash
curl -X GET "http://localhost:8080/api/admin/user/list?page=1&size=10&keyword=test" \
  -H "Authorization: Bearer <admin_token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "total": 100,
        "records": [
            {
                "id": 2,
                "username": "testuser",
                "nickname": "测试用户",
                "email": "test@example.com",
                "phone": "13800138000",
                "avatar": null,
                "role": 0,
                "status": 1,
                "createTime": "2024-01-01 10:00:00"
            }
        ],
        "current": 1,
        "size": 10,
        "pages": 10
    }
}
```

---

## 10. 管理员-获取用户详情

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员获取指定用户详情 |
| **路径** | `/api/admin/user/{id}` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 请求示例

```bash
curl -X GET "http://localhost:8080/api/admin/user/2" \
  -H "Authorization: Bearer <admin_token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "id": 2,
        "username": "testuser",
        "nickname": "测试用户",
        "email": "test@example.com",
        "phone": "13800138000",
        "avatar": null,
        "role": 0,
        "status": 1,
        "createTime": "2024-01-01 10:00:00"
    }
}
```

---

## 11. 管理员-更新用户状态

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员启用/禁用用户 |
| **路径** | `/api/admin/user/status/{id}` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| id | Long | 是 | 用户ID（路径参数） |
| status | Integer | 是 | 状态：0-禁用 1-正常（Query参数） |

### 请求示例

```bash
# 禁用用户
curl -X PUT "http://localhost:8080/api/admin/user/status/2?status=0" \
  -H "Authorization: Bearer <admin_token>"

# 启用用户
curl -X PUT "http://localhost:8080/api/admin/user/status/2?status=1" \
  -H "Authorization: Bearer <admin_token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "用户已禁用",
    "data": null
}
```

---

## 12. 管理员-重置用户密码

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员重置用户密码为默认密码 |
| **路径** | `/api/admin/user/reset-password/{id}` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

### 请求示例

```bash
curl -X PUT "http://localhost:8080/api/admin/user/reset-password/2" \
  -H "Authorization: Bearer <admin_token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "密码已重置为: 123456",
    "data": "123456"
}
```

---

## 13. 管理员-删除用户

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员删除用户 |
| **路径** | `/api/admin/user/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要（管理员） |

### 请求示例

```bash
curl -X DELETE "http://localhost:8080/api/admin/user/2" \
  -H "Authorization: Bearer <admin_token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "删除成功",
    "data": null
}
```

---

## 14. 图书-获取图书列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 分页获取图书列表（支持分类与关键词筛选） |
| **路径** | `/api/book/list` |
| **方法** | `GET` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |
| categoryId | Long | 否 | - | 分类ID |
| keyword | String | 否 | - | 关键词（书名/作者/出版社） |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "total": 100,
        "records": [],
        "current": 1,
        "size": 10,
        "pages": 10
    }
}
```

---

## 15. 图书-获取图书详情

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取图书详情 |
| **路径** | `/api/book/detail/{id}` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 16. 图书-搜索图书

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 根据关键词搜索图书 |
| **路径** | `/api/book/search` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 17. 图书-获取热门图书

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取热门图书列表 |
| **路径** | `/api/book/hot` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 18. 图书-获取新书推荐

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取新书推荐列表 |
| **路径** | `/api/book/new` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 19. 分类-获取分类列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取所有分类 |
| **路径** | `/api/category/list` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 20. 分类-获取分类树

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取分类树 |
| **路径** | `/api/category/tree` |
| **方法** | `GET` |
| **认证** | 不需要 |

---

## 21. 管理员-图书列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员分页获取图书列表 |
| **路径** | `/api/admin/book/list` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 22. 管理员-图书详情

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员获取图书详情 |
| **路径** | `/api/admin/book/{id}` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 23. 管理员-添加图书

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员添加图书 |
| **路径** | `/api/admin/book/add` |
| **方法** | `POST` |
| **认证** | 需要（管理员） |

---

## 24. 管理员-更新图书

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员更新图书 |
| **路径** | `/api/admin/book/update` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

---

## 25. 管理员-删除图书

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员删除图书 |
| **路径** | `/api/admin/book/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要（管理员） |

---

## 26. 管理员-更新图书状态

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 上架/下架图书 |
| **路径** | `/api/admin/book/status/{id}` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

---

## 27. 管理员-分类列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员获取分类列表 |
| **路径** | `/api/admin/category/list` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 28. 管理员-分类树

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员获取分类树 |
| **路径** | `/api/admin/category/tree` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 29. 管理员-添加分类

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员添加分类 |
| **路径** | `/api/admin/category/add` |
| **方法** | `POST` |
| **认证** | 需要（管理员） |

---

## 30. 管理员-更新分类

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员更新分类 |
| **路径** | `/api/admin/category/update` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

---

## 31. 管理员-删除分类

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员删除分类 |
| **路径** | `/api/admin/category/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要（管理员） |

---

## 32. 订单-创建订单

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 创建订单 |
| **路径** | `/api/order/create` |
| **方法** | `POST` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| cartIds | List<Long> | 是 | 购物车ID列表 |
| addressId | Long | 是 | 收货地址ID |
| remark | String | 否 | 备注 |

---

## 33. 订单-获取订单列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 分页获取用户订单 |
| **路径** | `/api/order/list` |
| **方法** | `GET` |
| **认证** | 需要 |

---

## 34. 订单-获取订单详情

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取订单详情（含订单项） |
| **路径** | `/api/order/detail/{id}` |
| **方法** | `GET` |
| **认证** | 需要 |

---

## 35. 订单-取消订单

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 取消订单 |
| **路径** | `/api/order/cancel/{id}` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 36. 订单-支付订单

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 支付订单（模拟） |
| **路径** | `/api/order/pay/{id}` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 37. 订单-确认收货

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 确认收货 |
| **路径** | `/api/order/confirm/{id}` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 38. 管理员-订单列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员分页获取订单列表 |
| **路径** | `/api/admin/order/list` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 39. 管理员-订单详情

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 管理员获取订单详情 |
| **路径** | `/api/admin/order/{id}` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 40. 管理员-订单发货

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 订单发货 |
| **路径** | `/api/admin/order/ship/{id}` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

---

## 41. 管理员-更新订单状态

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新订单状态 |
| **路径** | `/api/admin/order/status/{id}` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

---

## 42. 管理员-删除订单

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 删除订单 |
| **路径** | `/api/admin/order/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要（管理员） |

---

## 43. 购物车-获取列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取购物车列表 |
| **路径** | `/api/cart/list` |
| **方法** | `GET` |
| **认证** | 需要 |

---

## 44. 购物车-添加商品

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 添加图书到购物车 |
| **路径** | `/api/cart/add` |
| **方法** | `POST` |
| **认证** | 需要 |

---

## 45. 购物车-更新数量

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新购物车商品数量 |
| **路径** | `/api/cart/update` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 46. 购物车-删除商品

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 删除购物车商品 |
| **路径** | `/api/cart/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要 |

---

## 47. 购物车-清空购物车

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 清空购物车 |
| **路径** | `/api/cart/clear` |
| **方法** | `DELETE` |
| **认证** | 需要 |

---

## 48. 购物车-获取数量

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取购物车商品数量 |
| **路径** | `/api/cart/count` |
| **方法** | `GET` |
| **认证** | 需要 |

---

## 49. 地址-获取列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取收货地址列表 |
| **路径** | `/api/address/list` |
| **方法** | `GET` |
| **认证** | 需要 |

---

## 50. 地址-添加地址

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 添加收货地址 |
| **路径** | `/api/address/add` |
| **方法** | `POST` |
| **认证** | 需要 |

---

## 51. 地址-更新地址

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新收货地址 |
| **路径** | `/api/address/update` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 52. 地址-删除地址

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 删除收货地址 |
| **路径** | `/api/address/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要 |

---

## 53. 地址-设置默认

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 设置默认地址 |
| **路径** | `/api/address/default/{id}` |
| **方法** | `PUT` |
| **认证** | 需要 |

---

## 54. 评价-添加评价

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 提交图书评价 |
| **路径** | `/api/review/add` |
| **方法** | `POST` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| bookId | Long | 是 | 图书ID |
| rating | Integer | 是 | 评分（1-5） |
| content | String | 是 | 评价内容（5-200字符） |

### 请求示例

```bash
curl -X POST "http://localhost:8080/api/review/add" \
  -H "Authorization: Bearer <token>" \
  -H "Content-Type: application/json" \
  -d '{
    "bookId": 1,
    "rating": 5,
    "content": "内容丰富，值得推荐！"
  }'
```

### 响应示例

```json
{
    "code": 200,
    "message": "评价成功",
    "data": null
}
```

---

## 55. 评价-图书评价列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取指定图书的评价列表（分页） |
| **路径** | `/api/review/book/{bookId}` |
| **方法** | `GET` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "total": 12,
        "records": [
            {
                "id": 3,
                "userId": 2,
                "bookId": 1,
                "rating": 5,
                "content": "内容丰富，值得推荐！",
                "nickname": "小明",
                "avatar": "http://xxx.com/avatar.jpg",
                "createTime": "2026-02-09 18:10:00"
            }
        ],
        "current": 1,
        "size": 10,
        "pages": 2
    }
}
```

---

## 56. 评价-我的评价列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取当前用户的评价列表（分页） |
| **路径** | `/api/review/my` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |

---

## 57. 评价-删除评价

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 删除当前用户评价 |
| **路径** | `/api/review/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X DELETE "http://localhost:8080/api/review/3" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "删除成功",
    "data": null
}
```

---

## 58. 收藏-添加收藏

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 收藏图书 |
| **路径** | `/api/favorite/add/{bookId}` |
| **方法** | `POST` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X POST "http://localhost:8080/api/favorite/add/1" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "收藏成功",
    "data": null
}
```

---

## 59. 收藏-取消收藏

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 取消收藏图书 |
| **路径** | `/api/favorite/remove/{bookId}` |
| **方法** | `DELETE` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X DELETE "http://localhost:8080/api/favorite/remove/1" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "取消收藏成功",
    "data": null
}
```

---

## 60. 收藏-收藏列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取当前用户收藏列表（分页） |
| **路径** | `/api/favorite/list` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "total": 5,
        "records": [
            {
                "id": 3,
                "userId": 2,
                "bookId": 1,
                "createTime": "2026-02-09 18:20:00",
                "book": {
                    "id": 1,
                    "title": "数据结构",
                    "author": "张三",
                    "price": 49.9,
                    "coverImage": "http://xxx.com/cover.jpg",
                    "rating": 4.6
                }
            }
        ],
        "current": 1,
        "size": 10,
        "pages": 1
    }
}
```

---

## 61. 收藏-检查是否收藏

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 检查当前用户是否已收藏某图书 |
| **路径** | `/api/favorite/check/{bookId}` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X GET "http://localhost:8080/api/favorite/check/1" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": true
}
```

---

## 62. 浏览记录-获取列表

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取当前用户浏览记录（分页） |
| **路径** | `/api/history/list` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| page | Integer | 否 | 1 | 页码 |
| size | Integer | 否 | 10 | 每页数量 |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "total": 6,
        "records": [
            {
                "id": 5,
                "userId": 2,
                "bookId": 1,
                "browseCount": 3,
                "lastBrowseTime": "2026-02-09 19:10:00",
                "book": {
                    "id": 1,
                    "title": "数据结构",
                    "author": "张三",
                    "price": 49.9,
                    "coverImage": "http://xxx.com/cover.jpg"
                }
            }
        ],
        "current": 1,
        "size": 10,
        "pages": 1
    }
}
```

---

## 63. 浏览记录-清空记录

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 清空当前用户浏览记录 |
| **路径** | `/api/history/clear` |
| **方法** | `DELETE` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X DELETE "http://localhost:8080/api/history/clear" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "清空成功",
    "data": null
}
```

---

## 64. 浏览记录-删除记录

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 删除单条浏览记录 |
| **路径** | `/api/history/{id}` |
| **方法** | `DELETE` |
| **认证** | 需要 |

### 请求示例

```bash
curl -X DELETE "http://localhost:8080/api/history/5" \
  -H "Authorization: Bearer <token>"
```

### 响应示例

```json
{
    "code": 200,
    "message": "删除成功",
    "data": null
}
```

---

## 65. 推荐-个性化推荐

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 基于 KNN 的个性化推荐 |
| **路径** | `/api/recommend/personal` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 10 | 推荐数量 |

---

## 66. 推荐-热门推荐

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 热门图书推荐 |
| **路径** | `/api/recommend/hot` |
| **方法** | `GET` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 10 | 推荐数量 |

---

## 67. 推荐-相似图书推荐

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 根据当前图书推荐相似图书 |
| **路径** | `/api/recommend/similar/{bookId}` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 6 | 推荐数量 |

---

## 68. 推荐-猜你喜欢

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 综合推荐（猜你喜欢） |
| **路径** | `/api/recommend/guess` |
| **方法** | `GET` |
| **认证** | 需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 10 | 推荐数量 |

---

## 69. 推荐-新书推荐

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 新书推荐 |
| **路径** | `/api/recommend/new` |
| **方法** | `GET` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 10 | 推荐数量 |

---

## 70. 统计-总览

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取系统总览统计 |
| **路径** | `/api/admin/statistics/overview` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "userCount": 120,
        "bookCount": 560,
        "orderCount": 210,
        "totalSales": 9850.5,
        "todayUserCount": 3,
        "todayOrderCount": 8,
        "todaySales": 360.0
    }
}
```

---

## 71. 统计-销售趋势

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取销售趋势（按日期） |
| **路径** | `/api/admin/statistics/sales` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| startDate | String | 否 | - | 开始日期（YYYY-MM-DD） |
| endDate | String | 否 | - | 结束日期（YYYY-MM-DD） |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": [
        { "date": "2026-02-04", "totalSales": 320.0, "orderCount": 5 },
        { "date": "2026-02-05", "totalSales": 560.0, "orderCount": 8 }
    ]
}
```

---

## 72. 统计-销量排行

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取销量排行榜 |
| **路径** | `/api/admin/statistics/rank/sales` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| limit | Integer | 否 | 10 | 排行数量 |

---

## 73. 统计-分类销量

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取分类销量统计 |
| **路径** | `/api/admin/statistics/category/sales` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

---

## 74. 统计-用户增长

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取用户增长统计 |
| **路径** | `/api/admin/statistics/user/growth` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 默认值 | 说明 |
|--------|------|------|--------|------|
| days | Integer | 否 | 7 | 最近天数 |

---

## 75. 文件-上传图片

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 上传图片（通用） |
| **路径** | `/api/file/upload` |
| **方法** | `POST` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| file | File | 是 | 图片文件 |

### 响应示例

```json
{
    "code": 200,
    "message": "上传成功",
    "data": "/uploads/common/xxx.png"
}
```

---

## 76. 文件-上传封面

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 上传图书封面 |
| **路径** | `/api/file/upload/cover` |
| **方法** | `POST` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| file | File | 是 | 图片文件 |

---

## 77. 文件-上传头像

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 上传用户头像 |
| **路径** | `/api/file/upload/avatar` |
| **方法** | `POST` |
| **认证** | 不需要 |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| file | File | 是 | 图片文件 |

---

## 78. 推荐配置-获取配置

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 获取推荐算法配置 |
| **路径** | `/api/admin/recommend/config` |
| **方法** | `GET` |
| **认证** | 需要（管理员） |

### 响应示例

```json
{
    "code": 200,
    "message": "操作成功",
    "data": {
        "kValue": 5,
        "similarityType": "cosine",
        "minSimilarity": 0.1,
        "weightReview": 1.0,
        "weightFavorite": 0.7,
        "weightBrowse": 0.3,
        "weightPurchase": 1.2
    }
}
```

---

## 79. 推荐配置-更新配置

### 接口信息

| 项目 | 说明 |
|------|------|
| **功能** | 更新推荐算法配置 |
| **路径** | `/api/admin/recommend/config` |
| **方法** | `PUT` |
| **认证** | 需要（管理员） |

### 请求参数

| 参数名 | 类型 | 必填 | 说明 |
|--------|------|------|------|
| kValue | Integer | 是 | K值（1-50） |
| similarityType | String | 是 | cosine / euclidean |
| minSimilarity | Double | 是 | 最小相似度阈值（0-1） |
| weightReview | Double | 是 | 评分权重（0-5） |
| weightFavorite | Double | 是 | 收藏权重（0-5） |
| weightBrowse | Double | 是 | 浏览权重（0-5） |
| weightPurchase | Double | 是 | 购买权重（0-5） |

---

## 测试账号

系统预置了以下测试账号：

| 账号 | 密码 | 角色 | 说明 |
|------|------|------|------|
| admin | admin123 | 管理员 | 系统管理员账号 |

> **注意**: 新注册用户默认为普通用户（role=0）

---

## Postman 测试集合

### 环境变量设置

```json
{
    "baseUrl": "http://localhost:8080",
    "token": ""
}
```

### 登录后自动设置Token（Postman Tests脚本）

在登录接口的 Tests 标签中添加：

```javascript
if (pm.response.code === 200) {
    var jsonData = pm.response.json();
    if (jsonData.data && jsonData.data.token) {
        pm.environment.set("token", jsonData.data.token);
    }
}
```

---

## 更新日志

| 版本 | 日期 | 更新内容 |
|------|------|----------|
| v1.7.0 | 2026-02-10 | 新增推荐配置接口文档 |
| v1.6.0 | 2026-02-10 | 新增文件上传接口文档 |
| v1.5.0 | 2026-02-10 | 新增管理员数据统计接口文档 |
| v1.4.0 | 2026-02-10 | 新增推荐模块接口文档 |
| v1.3.0 | 2026-02-10 | 新增浏览记录模块接口文档 |
| v1.2.0 | 2026-02-09 | 新增收藏模块接口文档 |
| v1.1.0 | 2026-02-09 | 新增图书评价模块接口文档 |
| v1.0.0 | 2024-12 | 初始版本，完成认证模块所有接口 |

